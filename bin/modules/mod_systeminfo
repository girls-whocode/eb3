#!/usr/bin/env bash
# title					:Enhanced BASH v3
# description		:
# author				:Jessica Brown
# date					:2022-04-21
# version				:3.0.0
# usage					:
# notes					:
# bash_version	:5.1.16(1)-release
# ==============================================================================

function systeminfo() {
  if test -r /etc/os-release; then . /etc/os-release else . /usr/lib/os-release; fi

  who>${eb3_TempPath}who
  free -h | grep -v + > ${eb3_TempPath}ramcache
  df -h| grep 'Filesystem\|/dev/sda*' > ${eb3_TempPath}diskusage
  
  # Check if connected to Internet or not
  eb3_connected=$(ping -c 1 google.com &> /dev/null && echo -e "${Green}Connected" || echo -e "${Red}Disconnected")
  
  # Check OS Type, Name, Version, Architecture, Kernel, Hostname, Internal IP, External IP, Nameserver, Swap, Memory, Disk Usage, Load Average, Uptime
  
  eb3_os=$(uname -o)
  eb3_os_name=${PRETTY_NAME}
  eb3_os_ver=${VERSION_ID}
  eb3_architecture=$(uname -m)
  eb3_kernel_release=$(uname -r)
  eb3_hostname=$(hostname)
  eb3_internalip=$(hostname -I)
  eb3_externalip=$(curl -s ipecho.net/plain;echo)
  eb3_nameservers=$(cat /etc/resolv.conf | sed '1 d' | awk '{print $2}')
  eb3_whosloggedin=$(cat ${eb3_TempPath}who)
  eb3_swap=$(cat "${eb3_TempPath}ramcache" | grep -v "Swap")
  eb3_memory=$(cat "${eb3_TempPath}ramcache" | grep -v "Mem")
  eb3_disk_usage=$(cat "${eb3_TempPath}diskusage")
  eb3_loadaverage=$(top -n 1 -b | grep "load average:" | awk '{print $10 $11 $12}')
  eb3_tecuptime=$(uptime | awk '{print $3,$4}' | cut -f1 -d,)

  echo -ne "${Blue}Operating System Type : ${White} ${eb3_os} "
  echo -ne "${Blue}OS Name : ${White} ${eb3_os_name} "
  echo -ne "${Blue}OS Version : ${White} ${eb3_os_ver} "
  echo -ne "${Blue}Architecture : ${White} ${eb3_architecture} "
  echo -e "${Blue}Kernel Release : ${White} ${eb3_kernel_release}"
  # echo -e "${Blue}You are : ${eb3_connected}"
  # echo -e "${Blue}Hostname : ${White} ${eb3_hostname}"
  # echo -e "${Blue}Internal IP : ${White} ${eb3_internalip}"
  # echo -e "${Blue}External IP : ${White} ${eb3_externalip}"
  # echo -e "${Blue}Name Servers : ${White} ${eb3_nameservers}"
  # echo -e "${Blue}Logged In users : ${White} ${eb3_whosloggedin}"
  # echo -e "${Blue}Ram Usages : ${White} ${eb3_memory}"
  # echo -e "${Blue}Swap Usages : ${White} ${eb3_swap}"
  # echo -e "${Blue}Disk Usages : ${White} ${eb3_disk_usage}"
  # echo -e "${Green}Load Average : ${White} ${eb3_loadaverage}"
  # echo -e "${Green}System Uptime Days/(HH:MM) : ${White} ${eb3_tecuptime}"
}
